---
title: "Ciencia_datos_r"
format: html
editor: visual
---

```{r}
#install.packages("datos")

```
```{r}
#install.packages("Lahman")
```

# Librerías

```{r}
library(tidyverse)
library(datos)
```

## Datos

```{r}
millas %>% 
  head()
```

## Visualización 

```{r}
millas %>% 
  ggplot() +
  geom_point(mapping = aes(x=cilindrada, y= autopista))
  
```
**Relación negativa entre la eficiencia en autopista y el tamaño del motor: Entre más grande el motor menos eficiencia**

```{r}
ggplot(data = millas) +
  geom_point(mapping = aes(x=autopista, y= cilindros))
```
```{r}
millas %>% 
  ggplot() +
  geom_point(mapping = aes(x=clase, y= traccion))
```

## Gráficas con "niveles" o valores estéticos 

**proceso de escalamiento** 

***Ojo: mapear una variable no ordenada (clase) a una estética ordenada (size) no es una buena idea***

***Existen otras categorías para mapear, size: puntos de diferentes tamaños, alpha: puntos con transparencia, shape: hasta 6 formas en los puntos. Esta variable es categórica***

```{r}
millas %>% 
  ggplot() +
  geom_point(mapping = aes(x=cilindrada, y= autopista, color = clase))
```

?millas
?geom_point

## Separar por facetas 

**variables categóricas**

### facet_wrap

```{r}
millas %>% 
  ggplot() +
  geom_point(mapping = aes(x=cilindrada, y= autopista)) +
  facet_wrap(~clase, nrow = 3)
```
### facet_grid

**Una variable categórica y otra numérica**

```{r}
millas %>% 
  ggplot() +
  geom_point(mapping = aes(x=cilindrada, y= autopista)) +
  facet_grid(traccion ~ cilindros)
```

```{r}
millas %>% 
  ggplot() +
  geom_point(mapping = aes(x=cilindrada, y= autopista)) +
  facet_grid(. ~ cilindros )
```
### Ejercicio

***Conclusión: Existen autos con tracción delantera; de 4 cilindros; de motor pequeño con más eficiencia en autopista.***


```{r}
millas %>% 
ggplot() +
  geom_point(mapping = aes(x = traccion, y = cilindros))
```
***En este caso la variable tracción es categórica en una función de mapeo que normalmente usa dos variables numéricas. El resultado se referirá a existencias no a densidad***

### Varias capas

```{r}
millas %>% 
ggplot(mapping = aes(x = cilindrada, y = autopista)) +
  geom_point(mapping = aes(color = clase)) +
  geom_smooth(data = filter(millas, clase == "subcompacto"), se = FALSE)
```


```{r}
ggplot(data = millas, mapping = aes(x = cilindrada, y = autopista, color = traccion)) +
  geom_point() +
  geom_smooth(se = TRUE)
```

### Ejercicios 

```{r}
millas %>% 
ggplot(mapping = aes (x = cilindrada, y = autopista)) +
  geom_point() +
  geom_smooth(se = FALSE)
  
```

```{r}
millas %>%
  ggplot(mapping = aes(x = cilindrada, y = autopista)) +
  geom_point()+
  geom_smooth(mapping = aes(x = cilindrada, y = autopista, group = traccion), se = FALSE)
```

```{r}
millas %>% 
  ggplot(mapping = aes(x = cilindrada, y= autopista)) +
  geom_point(mapping = aes(color=traccion))+
  geom_smooth(se = FALSE)
```


```{r}
millas %>% 
  ggplot(mapping = aes(x= cilindrada, y= autopista, color = traccion)) +
  geom_point()+
  geom_smooth(se = FALSE)
```

